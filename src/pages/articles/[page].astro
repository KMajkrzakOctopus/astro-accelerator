---
import type { Frontmatter } from '../../config';
import Default from '../../components/head/Head.astro';

const frontmatter: Frontmatter = {
  layout: '../layouts/Default.astro',
  title: 'About Astro Boilerplate',
  date:   '2022-09-17',
  keywords: 'about,astro,boilerplate',
  description: 'Astro boilerplate is an opinionated Astro site.',
  bannerImage: {
      src: 'surface-accessories-700.webp',
      alt: 'Dummy image',
  },
  dir: 'ltr'
};

export async function getStaticPaths({ paginate }) {
  const sourcePosts = await Astro.glob('../articles/**/*.md');
  const urlPosts = sourcePosts
    .filter(p => p.url != null && p.url != '');

  return paginate(urlPosts, { pageSize: 2 });
}

// All paginated data is passed on the "page" prop
const { page } = Astro.props;

---
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sit amet elit sodales, egestas odio eu, interdum nunc. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In elit odio, dapibus nec finibus sit amet, aliquam a tortor.

<!--Display the current page number. Astro.params.page can also be used!-->
<h1>Page {page.currentPage}</h1>
<ul class="post-list">
  <!--List the array of astronaut info-->
  {page.data.map((post) => (
  <li class="list-item" data-destination={ post.url }>
    <article>
      <img src={ post.frontmatter.bannerImage.src } alt={ post.frontmatter.bannerImage.alt } loading="lazy" />
      <div class="list-item-content">
      <span class="post-meta">{ post.frontmatter.date }</span>
      <h2>
        <a href={ post.url }>{ post.frontmatter.title }</a>
      </h2>
    </div>
    </article>
  </li>
  ))}
</ul>

{page.url.prev ? <a href={page.url.prev}>Previous</a> : null}
{page.url.next ? <a href={page.url.next}>Next</a> : null}